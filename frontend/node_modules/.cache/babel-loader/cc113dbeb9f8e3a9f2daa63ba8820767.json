{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'App',\n\n  data() {\n    return {\n      login: false,\n      username: '',\n      password: ''\n    };\n  },\n\n  beforeCreate() {\n    this.$store.commit('initializeStore');\n    const access = this.$store.state.access;\n\n    if (access) {\n      axios.defaults.headers.common['Authorization'] = 'JWT ' + access;\n      this.login = true;\n      console.log('login');\n    } else {\n      axios.defaults.headers.common['Authorization'] = '';\n      this.login = false;\n      console.log('no login');\n    }\n  },\n\n  mounted() {\n    setInterval(() => {\n      this.getAcces();\n    }, 59000);\n  },\n\n  methods: {\n    getAcces(e) {\n      const accessData = {\n        refresh: this.$store.state.refresh\n      };\n      axios.post('/api/v1/jwt/refresh/', accessData).then(response => {\n        const access = response.data.access;\n        this.$store.commit('setAccess', access);\n        axios.defaults.headers.common['Authorization'] = 'JWT ' + access;\n        localStorage.setItem('access', access);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    doLogin(e) {\n      const loginData = {\n        username: this.username,\n        password: this.password\n      };\n      axios.post('/api/v1/jwt/create/', loginData).then(response => {\n        const access = response.data.access;\n        this.$store.commit('setAccess', access);\n        axios.defaults.headers.common['Authorization'] = 'JWT ' + access;\n        localStorage.setItem('access', access);\n        this.login = true;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    logo\n  }\n};","map":{"version":3,"mappings":"AA0DA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAc;EACZC,IAAI,EAAE,KADM;;EAEZC,IAAI,GAAG;IACL,OAAO;MACLC,KAAK,EAAE,KADF;MAELC,QAAQ,EAAE,EAFL;MAGLC,QAAQ,EAAE;IAHL,CAAP;EAKD,CARW;;EASZC,YAAY,GAAE;IACZ,KAAKC,MAAL,CAAYC,MAAZ,CAAmB,iBAAnB;IACA,MAAMC,MAAK,GAAI,KAAKF,MAAL,CAAYG,KAAZ,CAAkBD,MAAjC;;IACA,IAAGA,MAAH,EAAU;MACRT,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,SAASJ,MAA1D;MACA,KAAKN,KAAL,GAAa,IAAb;MACAW,OAAO,CAACC,GAAR,CAAY,OAAZ;IACD,CAJD,MAIK;MACHf,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,EAAjD;MACA,KAAKV,KAAL,GAAa,KAAb;MACAW,OAAO,CAACC,GAAR,CAAY,UAAZ;IACF;EACD,CArBW;;EAsBZC,OAAO,GAAE;IACPC,WAAW,CAAC,MAAI;MACd,KAAKC,QAAL;IACD,CAFU,EAET,KAFS,CAAX;EAGD,CA1BW;;EA2BZC,OAAO,EAAC;IACND,QAAQ,CAACE,CAAD,EAAG;MACT,MAAMC,UAAU,GAAC;QACfC,OAAO,EAAE,KAAKf,MAAL,CAAYG,KAAZ,CAAkBY;MADZ,CAAjB;MAGAtB,KAAK,CAACuB,IAAN,CAAW,sBAAX,EAAkCF,UAAlC,EACKG,IADL,CACUC,QAAQ,IAAE;QACd,MAAMhB,MAAK,GAAIgB,QAAQ,CAACvB,IAAT,CAAcO,MAA7B;QACA,KAAKF,MAAL,CAAYC,MAAZ,CAAmB,WAAnB,EAA+BC,MAA/B;QACAT,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAA+C,SAAOJ,MAAtD;QACAiB,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BlB,MAA9B;MACD,CANL,EAOKmB,KAPL,CAOWC,KAAK,IAAE;QACZf,OAAO,CAACC,GAAR,CAAYc,KAAZ;MACD,CATL;IAUD,CAfK;;IAgBNC,OAAO,CAACV,CAAD,EAAG;MACR,MAAMW,SAAS,GAAC;QACd3B,QAAQ,EAAE,KAAKA,QADD;QAEdC,QAAQ,EAAE,KAAKA;MAFD,CAAhB;MAIAL,KAAK,CAACuB,IAAN,CAAW,qBAAX,EAAiCQ,SAAjC,EACKP,IADL,CACUC,QAAQ,IAAE;QACd,MAAMhB,MAAK,GAAIgB,QAAQ,CAACvB,IAAT,CAAcO,MAA7B;QACA,KAAKF,MAAL,CAAYC,MAAZ,CAAmB,WAAnB,EAA+BC,MAA/B;QACAT,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAA+C,SAAOJ,MAAtD;QACAiB,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BlB,MAA9B;QACA,KAAKN,KAAL,GAAa,IAAb;MACD,CAPL,EAQKyB,KARL,CAQWC,KAAK,IAAE;QACZf,OAAO,CAACC,GAAR,CAAYc,KAAZ;MACD,CAVL;IAWD,CAhCK;;IAiCNG;EAjCM;AA3BI,CAAd","names":["axios","name","data","login","username","password","beforeCreate","$store","commit","access","state","defaults","headers","common","console","log","mounted","setInterval","getAcces","methods","e","accessData","refresh","post","then","response","localStorage","setItem","catch","error","doLogin","loginData","logo"],"sourceRoot":"","sources":["/home/lxqt/Documents/Proyectos/sigmav2/frontend/src/App.vue"],"sourcesContent":["<template>\n<nav class=\"navbar navbar-expand-lg bg-light\">\n  <div class=\"container-fluid\">\n    <a class=\"navbar-brand\" href=\"#\"> <router-link to=\"/\">Home</router-link></a>\n    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n      <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n        <li class=\"nav-item\">\n          <a class=\"nav-link active\" aria-current=\"page\" href=\"#\">Home</a>\n        </li>\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"#\">Link</a>\n        </li>\n        <li class=\"nav-item dropdown\">\n          <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n            Dropdown\n          </a>\n          <ul class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n            <li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\n            <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n            <li><hr class=\"dropdown-divider\"></li>\n            <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n          </ul>\n        </li>\n        <li class=\"nav-item\">\n          <a class=\"nav-link disabled\">Disabled</a>\n        </li>\n      </ul>\n      <form class=\"d-flex\" role=\"search\">\n        <input class=\"form-control me-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\">\n        <button class=\"btn btn-outline-success\" type=\"submit\">Search</button>\n      </form>\n    </div>\n  </div>\n</nav>\n  <nav>\n    <div v-if=\"login == true\">\n       <router-link to=\"/\">Home</router-link>\n       <form v-on:submit.prevent=\"doLogout\">\n        <button type=\"submit\">Cerrar Sesion</button>\n      </form>\n    </div>\n    <div v-else>\n      <form v-on:submit.prevent=\"doLogin\">\n        <label>Usuario</label>\n        <input type=\"username\" name=\"username\" v-model=\"username\"> <br><br>\n        <label>Contrase√±a</label>\n        <input type=\"password\" name=\"password\" v-model=\"password\"> <br><br>\n        <button type=\"submit\">Iniciar Sesion</button>\n      </form>\n    </div>\n   \n  </nav>\n  <router-view/>\n</template>\n<script>\nimport axios from 'axios'\nexport default{\n  name: 'App',\n  data() {\n    return {\n      login: false,\n      username: '',\n      password: ''\n    }\n  },\n  beforeCreate(){\n    this.$store.commit('initializeStore')\n    const access = this.$store.state.access\n    if(access){\n      axios.defaults.headers.common['Authorization'] = 'JWT ' + access\n      this.login = true\n      console.log('login')\n    }else{\n      axios.defaults.headers.common['Authorization'] = ''\n      this.login = false\n      console.log('no login')\n    }\n  },\n  mounted(){\n    setInterval(()=>{\n      this.getAcces()\n    },59000)\n  },\n  methods:{\n    getAcces(e){\n      const accessData={\n        refresh: this.$store.state.refresh,\n      }\n      axios.post('/api/v1/jwt/refresh/',accessData)\n          .then(response=>{\n            const access = response.data.access\n            this.$store.commit('setAccess',access)\n            axios.defaults.headers.common['Authorization']='JWT '+access\n            localStorage.setItem('access',access)\n          })\n          .catch(error=>{\n            console.log(error)\n          })\n    },\n    doLogin(e){\n      const loginData={\n        username: this.username,\n        password: this.password,\n      }\n      axios.post('/api/v1/jwt/create/',loginData)\n          .then(response=>{\n            const access = response.data.access\n            this.$store.commit('setAccess',access)\n            axios.defaults.headers.common['Authorization']='JWT '+access\n            localStorage.setItem('access',access)\n            this.login = true\n          })\n          .catch(error=>{\n            console.log(error)\n          })\n    },\n    logo\n    }\n  }\n\n</script>\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\nnav {\n  padding: 30px;\n\n  a {\n    font-weight: bold;\n    color: #2c3e50;\n\n    &.router-link-exact-active {\n      color: #42b983;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}