{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'App',\n\n  data() {\n    return {\n      login: false,\n      username: '',\n      password: '',\n      user_data: ''\n    };\n  },\n\n  mounted() {\n    setInterval(() => {\n      this.$store.commit('initializeStore');\n      const access = this.$store.state.access;\n\n      if (access) {\n        axios.defaults.headers.common['Authorization'] = 'JWT ' + access;\n        this.login = true;\n      } else {\n        axios.defaults.headers.common['Authorization'] = '';\n        this.login = false;\n      }\n    }, 58000), setInterval(() => {\n      this.getAcces();\n    }, 59000);\n  },\n\n  methods: {\n    getAcces(e) {\n      const accessData = {\n        refresh: this.$store.state.refresh\n      };\n      axios.post('/api/v1/jwt/refresh/', accessData).then(response => {\n        const access = response.data.access;\n        this.$store.commit('setAccess', access);\n        axios.defaults.headers.common['Authorization'] = 'JWT ' + access;\n        localStorage.setItem('access', access);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    doLogin(e) {\n      const loginData = {\n        username: this.username,\n        password: this.password\n      };\n      axios.post('/api/v1/jwt/create/', loginData).then(response => {\n        const access = response.data.access;\n        this.$store.commit('setAccess', access);\n        axios.defaults.headers.common['Authorization'] = 'JWT ' + access;\n        localStorage.setItem('access', access);\n        this.login = true;\n        this.username = '', this.password = '';\n      }).catch(error => {\n        console.log(error);\n      });\n      axios.get('/api/v1/users/me/').then(response => {\n        this.user_data = response.data.username;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    doLogout(e) {\n      this.$store.commit('setAccess', '');\n      axios.defaults.headers.common['Authorization'] = '';\n      localStorage.removeItem('access');\n      this.user_data = '';\n      this.login = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","login","username","password","user_data","mounted","setInterval","$store","commit","access","state","defaults","headers","common","getAcces","methods","e","accessData","refresh","post","then","response","localStorage","setItem","catch","error","console","log","doLogin","loginData","get","doLogout","removeItem"],"sourceRoot":"","sources":["/home/lxqt/Documents/Proyectos/sigmav2/frontend/src/App.vue"],"sourcesContent":["<template>\n<div v-if=\"login\">\n  <nav class=\"navbar navbar-expand-lg bg-light\">\n    <div class=\"container-fluid\">\n      <a class=\"navbar-brand\" href=\"#\"><router-link to=\"/\">Home</router-link></a>\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <a class=\"nav-link active\" aria-current=\"page\" href=\"#\">Home</a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#\">Link</a>\n          </li>\n          <li class=\"nav-item dropdown\">\n            <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n              Empresa\n            </a>\n            <ul class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n              <li><a class=\"dropdown-item\"><router-link to=\"/empresa/sedes\">Sedes</router-link></a></li>\n              <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n              <li><hr class=\"dropdown-divider\"></li>\n              <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n            </ul>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link disabled\">Disabled</a>\n          </li>\n        </ul>\n        <p :src=\"user_data\">Sesión iniciada como {{user_data}} \n          <button class=\"btn btn-outline-danger my-2 my-sm-0\" @click=\"doLogout\">Cerrar Sesión</button>\n        </p>\n      </div>\n    </div>\n  </nav>\n</div>\n<div v-else>\n<hr style=\"color:white;\">\n  <div class=\"row justify-content-md-center\">\n    <div class=\"col col-lg-8\">\n        <form v-on:submit.prevent=\"doLogin\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              Iniciar Sesión\n            </div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Ingrese sus credenciales para empezar</h5>\n              <p class=\"card-text\">\n                  \n                    <label for=\"validationCustom01\" class=\"form-label\">Usuario</label>\n                    <input type=\"text\" class=\"form-control\" id=\"validationCustom01\" v-model=\"username\" required>\n                    <div class=\"valid-feedback\">\n                      Looks good!\n                    </div>\n                    <label for=\"validationCustom01\" class=\"form-label\">Contraseña</label>\n                    <input type=\"password\" class=\"form-control\" id=\"validationCustom01\" v-model=\"password\" required>\n                    <div class=\"valid-feedback\">\n                      Looks good!\n                    </div>\n                \n\n              </p>\n              <button type=\"submit\" class=\"btn btn-primary\">Iniciar Sesión</button>\n            </div>\n          </div>\n        </form>\n    </div>\n  </div>\n</div>\n<router-view/>\n</template>\n<script>\nimport axios from 'axios'\nexport default{\n  name: 'App',\n  data() {\n    return {\n      login: false,\n      username: '',\n      password: '',\n      user_data:''\n    }\n  },\n  mounted(){\n  \n    setInterval(()=>{\n      this.$store.commit('initializeStore')\n    const access = this.$store.state.access\n    if(access){\n      axios.defaults.headers.common['Authorization'] = 'JWT ' + access\n      this.login = true\n    }else{\n      axios.defaults.headers.common['Authorization'] = ''\n      this.login = false\n\n    }\n    },58000),\n      setInterval(()=>{\n      this.getAcces()\n    },59000)\n  },\n  methods:{\n    getAcces(e){\n      const accessData={\n        refresh: this.$store.state.refresh,\n      }\n      axios.post('/api/v1/jwt/refresh/',accessData)\n          .then(response=>{\n            const access = response.data.access\n            this.$store.commit('setAccess',access)\n            axios.defaults.headers.common['Authorization']='JWT '+access\n            localStorage.setItem('access',access)\n          })\n          .catch(error=>{\n            console.log(error)\n          })\n    },\n    doLogin(e){\n      const loginData={\n        username: this.username,\n        password: this.password,\n      }\n      axios.post('/api/v1/jwt/create/',loginData)\n          .then(response=>{\n            const access = response.data.access\n            this.$store.commit('setAccess',access)\n            axios.defaults.headers.common['Authorization']='JWT '+access\n            localStorage.setItem('access',access)\n            this.login = true\n            this.username='',\n            this.password=''\n          })\n          .catch(error=>{\n            console.log(error)\n          })\n      axios.get('/api/v1/users/me/')\n          .then(response => {\n            this.user_data = response.data.username\n          })\n          .catch(error => {\n            console.log(error)\n          })\n    },\n    doLogout(e){\n      this.$store.commit('setAccess','')\n      axios.defaults.headers.common['Authorization'] = ''\n      localStorage.removeItem('access')\n      this.user_data = ''\n      this.login = false\n    }\n    }\n  }\n\n</script>\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\nnav {\n  padding: 30px;\n\n  a {\n    font-weight: bold;\n    color: #2c3e50;\n\n    &.router-link-exact-active {\n      color: #42b983;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}